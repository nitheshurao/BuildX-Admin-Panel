{"ast":null,"code":"import _regeneratorRuntime from \"/Users/redhan/Desktop/work/Ecom-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/Users/redhan/Desktop/work/Ecom-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"/Users/redhan/Desktop/work/Ecom-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/Users/redhan/Desktop/work/Ecom-Admin/src/views/calendar/CalendarView/AddEditEventModal/AddEditEventForm.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { v4 as uuidv4 } from 'uuid';\nimport * as Yup from 'yup';\nimport { Formik } from 'formik';\nimport { useSnackbar } from 'notistack';\nimport { Box, Typography, TextField, Button, IconButton, Divider, FormControlLabel, FormHelperText, Switch, SvgIcon, makeStyles } from '@material-ui/core';\nimport { DateTimePicker } from '@material-ui/pickers';\nimport { Trash as TrashIcon } from 'react-feather';\nimport wait from 'src/utils/wait';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    confirmButton: {\n      marginLeft: theme.spacing(2)\n    }\n  };\n});\n\nfunction AddEditEventForm(_ref) {\n  var _this = this;\n\n  var event = _ref.event,\n      mode = _ref.mode,\n      onAdd = _ref.onAdd,\n      onCancel = _ref.onCancel,\n      onDelete = _ref.onDelete,\n      onEdit = _ref.onEdit;\n  var classes = useStyles();\n\n  var _useSnackbar = useSnackbar(),\n      enqueueSnackbar = _useSnackbar.enqueueSnackbar;\n\n  return (\n    /*#__PURE__*/\n    React.createElement(Formik, {\n      initialValues: {\n        allDay: event.allDay || false,\n        color: event.color || '',\n        description: event.description || '',\n        end: event.end || moment(),\n        start: event.start || moment(),\n        title: event.title || ''\n      },\n      validationSchema: Yup.object().shape({\n        allDay: Yup.bool(),\n        description: Yup.string().max(5000),\n        end: Yup.date().when('start', function (start, schema) {\n          return start && schema.min(start, 'End date must be later than start date');\n        }),\n        start: Yup.date(),\n        title: Yup.string().max(255).required('Title is required')\n      }),\n      onSubmit:\n      /*#__PURE__*/\n      function () {\n        var _ref3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(values, _ref2) {\n          var resetForm, setErrors, setStatus, setSubmitting, data;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  resetForm = _ref2.resetForm, setErrors = _ref2.setErrors, setStatus = _ref2.setStatus, setSubmitting = _ref2.setSubmitting;\n                  _context.prev = 1;\n                  data = _objectSpread({}, values); // Make API request depending on mode type\n                  // If editting an event, here should make a patch request\n                  // else a post request\n\n                  _context.next = 5;\n                  return wait(200);\n\n                case 5:\n                  // On post request server should return an ID\n                  if (mode === 'add') {\n                    data.id = uuidv4();\n                  } else {\n                    data.id = event.id;\n                  }\n\n                  resetForm();\n                  setStatus({\n                    success: true\n                  });\n                  setSubmitting(false);\n                  enqueueSnackbar('Saved changes', {\n                    variant: 'success'\n                  });\n\n                  if (mode === 'add') {\n                    onAdd(data);\n                  } else {\n                    onEdit(data);\n                  }\n\n                  _context.next = 18;\n                  break;\n\n                case 13:\n                  _context.prev = 13;\n                  _context.t0 = _context[\"catch\"](1);\n                  setStatus({\n                    success: false\n                  });\n                  setErrors({\n                    submit: _context.t0.message\n                  });\n                  setSubmitting(false);\n\n                case 18:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, null, [[1, 13]]);\n        }));\n\n        return function (_x, _x2) {\n          return _ref3.apply(this, arguments);\n        };\n      }(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 5\n      }\n    }, function (_ref4) {\n      var errors = _ref4.errors,\n          handleBlur = _ref4.handleBlur,\n          handleChange = _ref4.handleChange,\n          handleSubmit = _ref4.handleSubmit,\n          isSubmitting = _ref4.isSubmitting,\n          setFieldTouched = _ref4.setFieldTouched,\n          setFieldValue = _ref4.setFieldValue,\n          touched = _ref4.touched,\n          values = _ref4.values;\n      return (\n        /*#__PURE__*/\n        React.createElement(\"form\", {\n          onSubmit: handleSubmit,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 9\n          }\n        },\n        /*#__PURE__*/\n        React.createElement(Box, {\n          p: 3,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 11\n          }\n        },\n        /*#__PURE__*/\n        React.createElement(Typography, {\n          align: \"center\",\n          gutterBottom: true,\n          variant: \"h3\",\n          color: \"textPrimary\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }\n        }, mode === 'add' ? 'Add Event' : 'Edit Event')),\n        /*#__PURE__*/\n        React.createElement(Box, {\n          p: 3,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 11\n          }\n        },\n        /*#__PURE__*/\n        React.createElement(TextField, {\n          error: Boolean(touched.title && errors.title),\n          fullWidth: true,\n          helperText: touched.title && errors.title,\n          label: \"Title\",\n          name: \"title\",\n          onBlur: handleBlur,\n          onChange: handleChange,\n          value: values.title,\n          variant: \"outlined\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }\n        }),\n        /*#__PURE__*/\n        React.createElement(Box, {\n          mt: 2,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }\n        },\n        /*#__PURE__*/\n        React.createElement(TextField, {\n          error: Boolean(touched.description && errors.description),\n          fullWidth: true,\n          helperText: touched.description && errors.description,\n          label: \"Description\",\n          name: \"description\",\n          onBlur: handleBlur,\n          onChange: handleChange,\n          value: values.description,\n          variant: \"outlined\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 15\n          }\n        })),\n        /*#__PURE__*/\n        React.createElement(Box, {\n          mt: 2,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }\n        },\n        /*#__PURE__*/\n        React.createElement(FormControlLabel, {\n          control:\n          /*#__PURE__*/\n          React.createElement(Switch, {\n            checked: values.allDay,\n            name: \"allDay\",\n            onChange: handleChange,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 19\n            }\n          }),\n          label: \"All day\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 15\n          }\n        })),\n        /*#__PURE__*/\n        React.createElement(Box, {\n          mt: 2,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }\n        },\n        /*#__PURE__*/\n        React.createElement(DateTimePicker, {\n          fullWidth: true,\n          inputVariant: \"outlined\",\n          label: \"Start date\",\n          name: \"start\",\n          onClick: function onClick() {\n            return setFieldTouched('end');\n          },\n          onChange: function onChange(date) {\n            return setFieldValue('start', date);\n          },\n          value: values.start,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 15\n          }\n        })),\n        /*#__PURE__*/\n        React.createElement(Box, {\n          mt: 2,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }\n        },\n        /*#__PURE__*/\n        React.createElement(DateTimePicker, {\n          fullWidth: true,\n          inputVariant: \"outlined\",\n          label: \"End date\",\n          name: \"end\",\n          onClick: function onClick() {\n            return setFieldTouched('end');\n          },\n          onChange: function onChange(date) {\n            return setFieldValue('end', date);\n          },\n          value: values.end,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 15\n          }\n        })), Boolean(touched.end && errors.end) &&\n        /*#__PURE__*/\n        React.createElement(Box, {\n          mt: 2,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 15\n          }\n        },\n        /*#__PURE__*/\n        React.createElement(FormHelperText, {\n          error: true,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 17\n          }\n        }, errors.end))),\n        /*#__PURE__*/\n        React.createElement(Divider, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 11\n          }\n        }),\n        /*#__PURE__*/\n        React.createElement(Box, {\n          p: 2,\n          display: \"flex\",\n          alignItems: \"center\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 11\n          }\n        }, mode === 'edit' &&\n        /*#__PURE__*/\n        React.createElement(IconButton, {\n          onClick: function onClick() {\n            return onDelete(event.id);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 15\n          }\n        },\n        /*#__PURE__*/\n        React.createElement(SvgIcon, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 17\n          }\n        },\n        /*#__PURE__*/\n        React.createElement(TrashIcon, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 19\n          }\n        }))),\n        /*#__PURE__*/\n        React.createElement(Box, {\n          flexGrow: 1,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }\n        }),\n        /*#__PURE__*/\n        React.createElement(Button, {\n          onClick: onCancel,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }\n        }, \"Cancel\"),\n        /*#__PURE__*/\n        React.createElement(Button, {\n          variant: \"contained\",\n          type: \"submit\",\n          disabled: isSubmitting,\n          color: \"secondary\",\n          className: classes.confirmButton,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }\n        }, \"Confirm\")))\n      );\n    })\n  );\n}\n\nAddEditEventForm.propTypes = {\n  event: PropTypes.object,\n  mode: PropTypes.oneOf(['add', 'edit']).isRequired,\n  onAdd: PropTypes.func,\n  onCancel: PropTypes.func,\n  onDelete: PropTypes.func,\n  onEdit: PropTypes.func\n};\nAddEditEventForm.defaultProps = {\n  event: {},\n  onAdd: function onAdd() {},\n  onCancel: function onCancel() {},\n  onDelete: function onDelete() {},\n  onEdit: function onEdit() {}\n};\nexport default AddEditEventForm;","map":{"version":3,"sources":["/Users/redhan/Desktop/work/Ecom-Admin/src/views/calendar/CalendarView/AddEditEventModal/AddEditEventForm.js"],"names":["React","PropTypes","moment","v4","uuidv4","Yup","Formik","useSnackbar","Box","Typography","TextField","Button","IconButton","Divider","FormControlLabel","FormHelperText","Switch","SvgIcon","makeStyles","DateTimePicker","Trash","TrashIcon","wait","useStyles","theme","root","confirmButton","marginLeft","spacing","AddEditEventForm","event","mode","onAdd","onCancel","onDelete","onEdit","classes","enqueueSnackbar","allDay","color","description","end","start","title","object","shape","bool","string","max","date","when","schema","min","required","values","resetForm","setErrors","setStatus","setSubmitting","data","id","success","variant","submit","message","errors","handleBlur","handleChange","handleSubmit","isSubmitting","setFieldTouched","setFieldValue","touched","Boolean","propTypes","oneOf","isRequired","func","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { v4 as uuidv4 } from 'uuid';\nimport * as Yup from 'yup';\nimport { Formik } from 'formik';\nimport { useSnackbar } from 'notistack';\nimport {\n  Box,\n  Typography,\n  TextField,\n  Button,\n  IconButton,\n  Divider,\n  FormControlLabel,\n  FormHelperText,\n  Switch,\n  SvgIcon,\n  makeStyles\n} from '@material-ui/core';\nimport { DateTimePicker } from '@material-ui/pickers';\nimport { Trash as TrashIcon } from 'react-feather';\nimport wait from 'src/utils/wait';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  confirmButton: {\n    marginLeft: theme.spacing(2)\n  }\n}));\n\nfunction AddEditEventForm({\n  event,\n  mode,\n  onAdd,\n  onCancel,\n  onDelete,\n  onEdit\n}) {\n  const classes = useStyles();\n  const { enqueueSnackbar } = useSnackbar();\n\n  return (\n    <Formik\n      initialValues={{\n        allDay: event.allDay || false,\n        color: event.color || '',\n        description: event.description || '',\n        end: event.end || moment(),\n        start: event.start || moment(),\n        title: event.title || ''\n      }}\n      validationSchema={Yup.object().shape({\n        allDay: Yup.bool(),\n        description: Yup.string().max(5000),\n        end: Yup.date()\n          .when(\n            'start',\n            (start, schema) => (start && schema.min(start, 'End date must be later than start date')),\n          ),\n        start: Yup.date(),\n        title: Yup.string().max(255).required('Title is required')\n      })}\n      onSubmit={async (values, {\n        resetForm,\n        setErrors,\n        setStatus,\n        setSubmitting\n      }) => {\n        try {\n          const data = {\n            ...values\n          };\n\n          // Make API request depending on mode type\n          // If editting an event, here should make a patch request\n          // else a post request\n          await wait(200);\n\n          // On post request server should return an ID\n          if (mode === 'add') {\n            data.id = uuidv4();\n          } else {\n            data.id = event.id;\n          }\n\n          resetForm();\n          setStatus({ success: true });\n          setSubmitting(false);\n          enqueueSnackbar('Saved changes', {\n            variant: 'success'\n          });\n\n          if (mode === 'add') {\n            onAdd(data);\n          } else {\n            onEdit(data);\n          }\n        } catch (error) {\n          setStatus({ success: false });\n          setErrors({ submit: error.message });\n          setSubmitting(false);\n        }\n      }}\n    >\n      {({\n        errors,\n        handleBlur,\n        handleChange,\n        handleSubmit,\n        isSubmitting,\n        setFieldTouched,\n        setFieldValue,\n        touched,\n        values\n      }) => (\n        <form onSubmit={handleSubmit}>\n          <Box p={3}>\n            <Typography\n              align=\"center\"\n              gutterBottom\n              variant=\"h3\"\n              color=\"textPrimary\"\n            >\n              {mode === 'add' ? 'Add Event' : 'Edit Event'}\n            </Typography>\n          </Box>\n          <Box p={3}>\n            <TextField\n              error={Boolean(touched.title && errors.title)}\n              fullWidth\n              helperText={touched.title && errors.title}\n              label=\"Title\"\n              name=\"title\"\n              onBlur={handleBlur}\n              onChange={handleChange}\n              value={values.title}\n              variant=\"outlined\"\n            />\n            <Box mt={2}>\n              <TextField\n                error={Boolean(touched.description && errors.description)}\n                fullWidth\n                helperText={touched.description && errors.description}\n                label=\"Description\"\n                name=\"description\"\n                onBlur={handleBlur}\n                onChange={handleChange}\n                value={values.description}\n                variant=\"outlined\"\n              />\n            </Box>\n            <Box mt={2}>\n              <FormControlLabel\n                control={(\n                  <Switch\n                    checked={values.allDay}\n                    name=\"allDay\"\n                    onChange={handleChange}\n                  />\n                )}\n                label=\"All day\"\n              />\n            </Box>\n            <Box mt={2}>\n              <DateTimePicker\n                fullWidth\n                inputVariant=\"outlined\"\n                label=\"Start date\"\n                name=\"start\"\n                onClick={() => setFieldTouched('end')}\n                onChange={(date) => setFieldValue('start', date)}\n                value={values.start}\n              />\n            </Box>\n            <Box mt={2}>\n              <DateTimePicker\n                fullWidth\n                inputVariant=\"outlined\"\n                label=\"End date\"\n                name=\"end\"\n                onClick={() => setFieldTouched('end')}\n                onChange={(date) => setFieldValue('end', date)}\n                value={values.end}\n              />\n            </Box>\n            {Boolean(touched.end && errors.end) && (\n              <Box mt={2}>\n                <FormHelperText error>\n                  {errors.end}\n                </FormHelperText>\n              </Box>\n            )}\n          </Box>\n          <Divider />\n          <Box\n            p={2}\n            display=\"flex\"\n            alignItems=\"center\"\n          >\n            {mode === 'edit' && (\n              <IconButton onClick={() => onDelete(event.id)}>\n                <SvgIcon>\n                  <TrashIcon />\n                </SvgIcon>\n              </IconButton>\n            )}\n            <Box flexGrow={1} />\n            <Button onClick={onCancel}>\n              Cancel\n            </Button>\n            <Button\n              variant=\"contained\"\n              type=\"submit\"\n              disabled={isSubmitting}\n              color=\"secondary\"\n              className={classes.confirmButton}\n            >\n              Confirm\n            </Button>\n          </Box>\n        </form>\n      )}\n    </Formik>\n  );\n}\n\nAddEditEventForm.propTypes = {\n  event: PropTypes.object,\n  mode: PropTypes.oneOf(['add', 'edit']).isRequired,\n  onAdd: PropTypes.func,\n  onCancel: PropTypes.func,\n  onDelete: PropTypes.func,\n  onEdit: PropTypes.func\n};\n\nAddEditEventForm.defaultProps = {\n  event: {},\n  onAdd: () => {},\n  onCancel: () => {},\n  onDelete: () => {},\n  onEdit: () => {}\n};\n\nexport default AddEditEventForm;\n"]},"metadata":{},"sourceType":"module"}