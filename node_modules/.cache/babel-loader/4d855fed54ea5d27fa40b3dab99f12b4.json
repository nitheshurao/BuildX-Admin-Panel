{"ast":null,"code":"import _toConsumableArray from\"/Users/redhan/Desktop/work/Ecom-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/redhan/Desktop/work/Ecom-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"/Users/redhan/Desktop/work/Ecom-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _slicedToArray from\"/Users/redhan/Desktop/work/Ecom-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable max-len */import React,{useState}from'react';import{Link as RouterLink}from'react-router-dom';import clsx from'clsx';import PerfectScrollbar from'react-perfect-scrollbar';import{Avatar,Box,Button,Card,Checkbox,Divider,IconButton,InputAdornment,Link,SvgIcon,Tab,Table,TableBody,TableCell,TableHead,TablePagination,TableRow,Tabs,TextField,Typography,makeStyles}from'@material-ui/core';import{Edit as EditIcon,ArrowRight as ArrowRightIcon,Search as SearchIcon}from'react-feather';import getInitials from'src/utils/getInitials';var tabs=[{value:'all',label:'All'},{value:'acceptsMarketing',label:'Accepts Marketing'},{value:'isProspect',label:'Prospect'},{value:'isReturning',label:'Returning'}];var sortOptions=[{value:'updatedAt|desc',label:'Last update (newest first)'},{value:'updatedAt|asc',label:'Last update (oldest first)'},{value:'orders|desc',label:'Total orders (high to low)'},{value:'orders|asc',label:'Total orders (low to high)'}];function applyFilters(customers,query,filters){return customers.filter(function(customer){var matches=true;if(query){var properties=['email','name'];var containsQuery=false;properties.forEach(function(property){if(customer[property].toLowerCase().includes(query.toLowerCase())){containsQuery=true;}});if(!containsQuery){matches=false;}}Object.keys(filters).forEach(function(key){var value=filters[key];if(value&&customer[key]!==value){matches=false;}});return matches;});}function applyPagination(customers,page,limit){return customers.slice(page*limit,page*limit+limit);}function descendingComparator(a,b,orderBy){if(b[orderBy]<a[orderBy]){return-1;}if(b[orderBy]>a[orderBy]){return 1;}return 0;}function getComparator(order,orderBy){return order==='desc'?function(a,b){return descendingComparator(a,b,orderBy);}:function(a,b){return-descendingComparator(a,b,orderBy);};}function applySort(customers,sort){var _sort$split=sort.split('|'),_sort$split2=_slicedToArray(_sort$split,2),orderBy=_sort$split2[0],order=_sort$split2[1];var comparator=getComparator(order,orderBy);var stabilizedThis=customers.map(function(el,index){return[el,index];});stabilizedThis.sort(function(a,b){// eslint-disable-next-line no-shadow\nvar order=comparator(a[0],b[0]);if(order!==0)return order;return a[1]-b[1];});return stabilizedThis.map(function(el){return el[0];});}var useStyles=makeStyles(function(theme){return{root:{},queryField:{width:500},bulkOperations:{position:'relative'},bulkActions:{paddingLeft:4,paddingRight:4,marginTop:6,position:'absolute',width:'100%',zIndex:2,backgroundColor:theme.palette.background.default},bulkAction:{marginLeft:theme.spacing(2)},avatar:{height:42,width:42,marginRight:theme.spacing(1)}};});function Results(_ref){var className=_ref.className,customers=_ref.customers,rest=_objectWithoutProperties(_ref,[\"className\",\"customers\"]);var classes=useStyles();var _useState=useState('all'),_useState2=_slicedToArray(_useState,2),currentTab=_useState2[0],setCurrentTab=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selectedCustomers=_useState4[0],setSelectedCustomers=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(10),_useState8=_slicedToArray(_useState7,2),limit=_useState8[0],setLimit=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),query=_useState10[0],setQuery=_useState10[1];var _useState11=useState(sortOptions[0].value),_useState12=_slicedToArray(_useState11,2),sort=_useState12[0],setSort=_useState12[1];var _useState13=useState({isProspect:null,isReturning:null,acceptsMarketing:null}),_useState14=_slicedToArray(_useState13,2),filters=_useState14[0],setFilters=_useState14[1];var handleTabsChange=function handleTabsChange(event,value){var updatedFilters=_objectSpread({},filters,{isProspect:null,isReturning:null,acceptsMarketing:null});if(value!=='all'){updatedFilters[value]=true;}setFilters(updatedFilters);setSelectedCustomers([]);setCurrentTab(value);};var handleQueryChange=function handleQueryChange(event){event.persist();setQuery(event.target.value);};var handleSortChange=function handleSortChange(event){event.persist();setSort(event.target.value);};var handleSelectAllCustomers=function handleSelectAllCustomers(event){setSelectedCustomers(event.target.checked?customers.map(function(customer){return customer.id;}):[]);};var handleSelectOneCustomer=function handleSelectOneCustomer(event,customerId){if(!selectedCustomers.includes(customerId)){setSelectedCustomers(function(prevSelected){return[].concat(_toConsumableArray(prevSelected),[customerId]);});}else{setSelectedCustomers(function(prevSelected){return prevSelected.filter(function(id){return id!==customerId;});});}};var handlePageChange=function handlePageChange(event,newPage){setPage(newPage);};var handleLimitChange=function handleLimitChange(event){setLimit(event.target.value);};// Usually query is done on backend with indexing solutions\nvar filteredCustomers=applyFilters(customers,query,filters);var sortedCustomers=applySort(filteredCustomers,sort);var paginatedCustomers=applyPagination(sortedCustomers,page,limit);var enableBulkOperations=selectedCustomers.length>0;var selectedSomeCustomers=selectedCustomers.length>0&&selectedCustomers.length<customers.length;var selectedAllCustomers=selectedCustomers.length===customers.length;return(/*#__PURE__*/React.createElement(Card,Object.assign({className:clsx(classes.root,className)},rest),/*#__PURE__*/React.createElement(Tabs,{onChange:handleTabsChange,scrollButtons:\"auto\",textColor:\"secondary\",value:currentTab,variant:\"scrollable\"},tabs.map(function(tab){return(/*#__PURE__*/React.createElement(Tab,{key:tab.value,value:tab.value,label:tab.label}));})),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(Box,{p:2,minHeight:56,display:\"flex\",alignItems:\"center\"},/*#__PURE__*/React.createElement(TextField,{className:classes.queryField,InputProps:{startAdornment:/*#__PURE__*/React.createElement(InputAdornment,{position:\"start\"},/*#__PURE__*/React.createElement(SvgIcon,{fontSize:\"small\",color:\"action\"},/*#__PURE__*/React.createElement(SearchIcon,null)))},onChange:handleQueryChange,placeholder:\"Search customers\",value:query,variant:\"outlined\"}),/*#__PURE__*/React.createElement(Box,{flexGrow:1}),/*#__PURE__*/React.createElement(TextField,{label:\"Sort By\",name:\"sort\",onChange:handleSortChange,select:true,SelectProps:{native:true},value:sort,variant:\"outlined\"},sortOptions.map(function(option){return(/*#__PURE__*/React.createElement(\"option\",{key:option.value,value:option.value},option.label));}))),enableBulkOperations&&/*#__PURE__*/React.createElement(\"div\",{className:classes.bulkOperations},/*#__PURE__*/React.createElement(\"div\",{className:classes.bulkActions},/*#__PURE__*/React.createElement(Checkbox,{checked:selectedAllCustomers,indeterminate:selectedSomeCustomers,onChange:handleSelectAllCustomers}),/*#__PURE__*/React.createElement(Button,{variant:\"outlined\",className:classes.bulkAction},\"Delete\"),/*#__PURE__*/React.createElement(Button,{variant:\"outlined\",className:classes.bulkAction},\"Edit\"))),/*#__PURE__*/React.createElement(PerfectScrollbar,null,/*#__PURE__*/React.createElement(Box,{minWidth:700},/*#__PURE__*/React.createElement(Table,null,/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,{padding:\"checkbox\"},/*#__PURE__*/React.createElement(Checkbox,{checked:selectedAllCustomers,indeterminate:selectedSomeCustomers,onChange:handleSelectAllCustomers})),/*#__PURE__*/React.createElement(TableCell,null,\"Name\"),/*#__PURE__*/React.createElement(TableCell,null,\"Location\"),/*#__PURE__*/React.createElement(TableCell,null,\"Orders\"),/*#__PURE__*/React.createElement(TableCell,null,\"Spent\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Actions\"))),/*#__PURE__*/React.createElement(TableBody,null,paginatedCustomers.map(function(customer){var isCustomerSelected=selectedCustomers.includes(customer.id);return(/*#__PURE__*/React.createElement(TableRow,{hover:true,key:customer.id,selected:isCustomerSelected},/*#__PURE__*/React.createElement(TableCell,{padding:\"checkbox\"},/*#__PURE__*/React.createElement(Checkbox,{checked:isCustomerSelected,onChange:function onChange(event){return handleSelectOneCustomer(event,customer.id);},value:isCustomerSelected})),/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(Box,{display:\"flex\",alignItems:\"center\"},/*#__PURE__*/React.createElement(Avatar,{className:classes.avatar,src:customer.avatar},getInitials(customer.name)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Link,{color:\"inherit\",component:RouterLink,to:\"/app/management/customers/1\",variant:\"h6\"},customer.name),/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",color:\"textSecondary\"},customer.email)))),/*#__PURE__*/React.createElement(TableCell,null,customer.location),/*#__PURE__*/React.createElement(TableCell,null,customer.orders),/*#__PURE__*/React.createElement(TableCell,null,customer.currency,customer.spent),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},/*#__PURE__*/React.createElement(IconButton,{component:RouterLink,to:\"/app/management/customers/1/edit\"},/*#__PURE__*/React.createElement(SvgIcon,{fontSize:\"small\"},/*#__PURE__*/React.createElement(EditIcon,null))),/*#__PURE__*/React.createElement(IconButton,{component:RouterLink,to:\"/app/management/customers/1\"},/*#__PURE__*/React.createElement(SvgIcon,{fontSize:\"small\"},/*#__PURE__*/React.createElement(ArrowRightIcon,null))))));}))))),/*#__PURE__*/React.createElement(TablePagination,{component:\"div\",count:filteredCustomers.length,onChangePage:handlePageChange,onChangeRowsPerPage:handleLimitChange,page:page,rowsPerPage:limit,rowsPerPageOptions:[5,10,25]})));}Results.defaultProps={customers:[]};export default Results;","map":{"version":3,"sources":["/Users/redhan/Desktop/work/Ecom-Admin/src/views/management/CustomerListView/Results.js"],"names":["React","useState","Link","RouterLink","clsx","PerfectScrollbar","Avatar","Box","Button","Card","Checkbox","Divider","IconButton","InputAdornment","SvgIcon","Tab","Table","TableBody","TableCell","TableHead","TablePagination","TableRow","Tabs","TextField","Typography","makeStyles","Edit","EditIcon","ArrowRight","ArrowRightIcon","Search","SearchIcon","getInitials","tabs","value","label","sortOptions","applyFilters","customers","query","filters","filter","customer","matches","properties","containsQuery","forEach","property","toLowerCase","includes","Object","keys","key","applyPagination","page","limit","slice","descendingComparator","a","b","orderBy","getComparator","order","applySort","sort","split","comparator","stabilizedThis","map","el","index","useStyles","theme","root","queryField","width","bulkOperations","position","bulkActions","paddingLeft","paddingRight","marginTop","zIndex","backgroundColor","palette","background","default","bulkAction","marginLeft","spacing","avatar","height","marginRight","Results","className","rest","classes","currentTab","setCurrentTab","selectedCustomers","setSelectedCustomers","setPage","setLimit","setQuery","setSort","isProspect","isReturning","acceptsMarketing","setFilters","handleTabsChange","event","updatedFilters","handleQueryChange","persist","target","handleSortChange","handleSelectAllCustomers","checked","id","handleSelectOneCustomer","customerId","prevSelected","handlePageChange","newPage","handleLimitChange","filteredCustomers","sortedCustomers","paginatedCustomers","enableBulkOperations","length","selectedSomeCustomers","selectedAllCustomers","tab","startAdornment","native","option","isCustomerSelected","name","email","location","orders","currency","spent","defaultProps"],"mappings":"2oBAAA,4BACA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,IAAI,GAAIC,CAAAA,UAAjB,KAAmC,kBAAnC,CACA,MAAOC,CAAAA,IAAP,KAAiB,MAAjB,CAEA,MAAOC,CAAAA,gBAAP,KAA6B,yBAA7B,CACA,OACEC,MADF,CAEEC,GAFF,CAGEC,MAHF,CAIEC,IAJF,CAKEC,QALF,CAMEC,OANF,CAOEC,UAPF,CAQEC,cARF,CASEX,IATF,CAUEY,OAVF,CAWEC,GAXF,CAYEC,KAZF,CAaEC,SAbF,CAcEC,SAdF,CAeEC,SAfF,CAgBEC,eAhBF,CAiBEC,QAjBF,CAkBEC,IAlBF,CAmBEC,SAnBF,CAoBEC,UApBF,CAqBEC,UArBF,KAsBO,mBAtBP,CAuBA,OACEC,IAAI,GAAIC,CAAAA,QADV,CAEEC,UAAU,GAAIC,CAAAA,cAFhB,CAGEC,MAAM,GAAIC,CAAAA,UAHZ,KAIO,eAJP,CAKA,MAAOC,CAAAA,WAAP,KAAwB,uBAAxB,CAEA,GAAMC,CAAAA,IAAI,CAAG,CACX,CACEC,KAAK,CAAE,KADT,CAEEC,KAAK,CAAE,KAFT,CADW,CAKX,CACED,KAAK,CAAE,kBADT,CAEEC,KAAK,CAAE,mBAFT,CALW,CASX,CACED,KAAK,CAAE,YADT,CAEEC,KAAK,CAAE,UAFT,CATW,CAaX,CACED,KAAK,CAAE,aADT,CAEEC,KAAK,CAAE,WAFT,CAbW,CAAb,CAmBA,GAAMC,CAAAA,WAAW,CAAG,CAClB,CACEF,KAAK,CAAE,gBADT,CAEEC,KAAK,CAAE,4BAFT,CADkB,CAKlB,CACED,KAAK,CAAE,eADT,CAEEC,KAAK,CAAE,4BAFT,CALkB,CASlB,CACED,KAAK,CAAE,aADT,CAEEC,KAAK,CAAE,4BAFT,CATkB,CAalB,CACED,KAAK,CAAE,YADT,CAEEC,KAAK,CAAE,4BAFT,CAbkB,CAApB,CAmBA,QAASE,CAAAA,YAAT,CAAsBC,SAAtB,CAAiCC,KAAjC,CAAwCC,OAAxC,CAAiD,CAC/C,MAAOF,CAAAA,SAAS,CAACG,MAAV,CAAiB,SAACC,QAAD,CAAc,CACpC,GAAIC,CAAAA,OAAO,CAAG,IAAd,CAEA,GAAIJ,KAAJ,CAAW,CACT,GAAMK,CAAAA,UAAU,CAAG,CAAC,OAAD,CAAU,MAAV,CAAnB,CACA,GAAIC,CAAAA,aAAa,CAAG,KAApB,CAEAD,UAAU,CAACE,OAAX,CAAmB,SAACC,QAAD,CAAc,CAC/B,GAAIL,QAAQ,CAACK,QAAD,CAAR,CAAmBC,WAAnB,GAAiCC,QAAjC,CAA0CV,KAAK,CAACS,WAAN,EAA1C,CAAJ,CAAoE,CAClEH,aAAa,CAAG,IAAhB,CACD,CACF,CAJD,EAMA,GAAI,CAACA,aAAL,CAAoB,CAClBF,OAAO,CAAG,KAAV,CACD,CACF,CAEDO,MAAM,CAACC,IAAP,CAAYX,OAAZ,EAAqBM,OAArB,CAA6B,SAACM,GAAD,CAAS,CACpC,GAAMlB,CAAAA,KAAK,CAAGM,OAAO,CAACY,GAAD,CAArB,CAEA,GAAIlB,KAAK,EAAIQ,QAAQ,CAACU,GAAD,CAAR,GAAkBlB,KAA/B,CAAsC,CACpCS,OAAO,CAAG,KAAV,CACD,CACF,CAND,EAQA,MAAOA,CAAAA,OAAP,CACD,CA3BM,CAAP,CA4BD,CAED,QAASU,CAAAA,eAAT,CAAyBf,SAAzB,CAAoCgB,IAApC,CAA0CC,KAA1C,CAAiD,CAC/C,MAAOjB,CAAAA,SAAS,CAACkB,KAAV,CAAgBF,IAAI,CAAGC,KAAvB,CAA8BD,IAAI,CAAGC,KAAP,CAAeA,KAA7C,CAAP,CACD,CAED,QAASE,CAAAA,oBAAT,CAA8BC,CAA9B,CAAiCC,CAAjC,CAAoCC,OAApC,CAA6C,CAC3C,GAAID,CAAC,CAACC,OAAD,CAAD,CAAaF,CAAC,CAACE,OAAD,CAAlB,CAA6B,CAC3B,MAAO,CAAC,CAAR,CACD,CAED,GAAID,CAAC,CAACC,OAAD,CAAD,CAAaF,CAAC,CAACE,OAAD,CAAlB,CAA6B,CAC3B,MAAO,EAAP,CACD,CAED,MAAO,EAAP,CACD,CAED,QAASC,CAAAA,aAAT,CAAuBC,KAAvB,CAA8BF,OAA9B,CAAuC,CACrC,MAAOE,CAAAA,KAAK,GAAK,MAAV,CACH,SAACJ,CAAD,CAAIC,CAAJ,QAAUF,CAAAA,oBAAoB,CAACC,CAAD,CAAIC,CAAJ,CAAOC,OAAP,CAA9B,EADG,CAEH,SAACF,CAAD,CAAIC,CAAJ,QAAU,CAACF,oBAAoB,CAACC,CAAD,CAAIC,CAAJ,CAAOC,OAAP,CAA/B,EAFJ,CAGD,CAED,QAASG,CAAAA,SAAT,CAAmBzB,SAAnB,CAA8B0B,IAA9B,CAAoC,iBACTA,IAAI,CAACC,KAAL,CAAW,GAAX,CADS,4CAC3BL,OAD2B,iBAClBE,KADkB,iBAElC,GAAMI,CAAAA,UAAU,CAAGL,aAAa,CAACC,KAAD,CAAQF,OAAR,CAAhC,CACA,GAAMO,CAAAA,cAAc,CAAG7B,SAAS,CAAC8B,GAAV,CAAc,SAACC,EAAD,CAAKC,KAAL,QAAe,CAACD,EAAD,CAAKC,KAAL,CAAf,EAAd,CAAvB,CAEAH,cAAc,CAACH,IAAf,CAAoB,SAACN,CAAD,CAAIC,CAAJ,CAAU,CAC5B;AACA,GAAMG,CAAAA,KAAK,CAAGI,UAAU,CAACR,CAAC,CAAC,CAAD,CAAF,CAAOC,CAAC,CAAC,CAAD,CAAR,CAAxB,CAEA,GAAIG,KAAK,GAAK,CAAd,CAAiB,MAAOA,CAAAA,KAAP,CAEjB,MAAOJ,CAAAA,CAAC,CAAC,CAAD,CAAD,CAAOC,CAAC,CAAC,CAAD,CAAf,CACD,CAPD,EASA,MAAOQ,CAAAA,cAAc,CAACC,GAAf,CAAmB,SAACC,EAAD,QAAQA,CAAAA,EAAE,CAAC,CAAD,CAAV,EAAnB,CAAP,CACD,CAED,GAAME,CAAAA,SAAS,CAAG9C,UAAU,CAAC,SAAC+C,KAAD,QAAY,CACvCC,IAAI,CAAE,EADiC,CAEvCC,UAAU,CAAE,CACVC,KAAK,CAAE,GADG,CAF2B,CAKvCC,cAAc,CAAE,CACdC,QAAQ,CAAE,UADI,CALuB,CAQvCC,WAAW,CAAE,CACXC,WAAW,CAAE,CADF,CAEXC,YAAY,CAAE,CAFH,CAGXC,SAAS,CAAE,CAHA,CAIXJ,QAAQ,CAAE,UAJC,CAKXF,KAAK,CAAE,MALI,CAMXO,MAAM,CAAE,CANG,CAOXC,eAAe,CAAEX,KAAK,CAACY,OAAN,CAAcC,UAAd,CAAyBC,OAP/B,CAR0B,CAiBvCC,UAAU,CAAE,CACVC,UAAU,CAAEhB,KAAK,CAACiB,OAAN,CAAc,CAAd,CADF,CAjB2B,CAoBvCC,MAAM,CAAE,CACNC,MAAM,CAAE,EADF,CAENhB,KAAK,CAAE,EAFD,CAGNiB,WAAW,CAAEpB,KAAK,CAACiB,OAAN,CAAc,CAAd,CAHP,CApB+B,CAAZ,EAAD,CAA5B,CA2BA,QAASI,CAAAA,OAAT,MAAoD,IAAjCC,CAAAA,SAAiC,MAAjCA,SAAiC,CAAtBxD,SAAsB,MAAtBA,SAAsB,CAARyD,IAAQ,0DAClD,GAAMC,CAAAA,OAAO,CAAGzB,SAAS,EAAzB,CADkD,cAEdtE,QAAQ,CAAC,KAAD,CAFM,wCAE3CgG,UAF2C,eAE/BC,aAF+B,8BAGAjG,QAAQ,CAAC,EAAD,CAHR,yCAG3CkG,iBAH2C,eAGxBC,oBAHwB,8BAI1BnG,QAAQ,CAAC,CAAD,CAJkB,yCAI3CqD,IAJ2C,eAIrC+C,OAJqC,8BAKxBpG,QAAQ,CAAC,EAAD,CALgB,yCAK3CsD,KAL2C,eAKpC+C,QALoC,8BAMxBrG,QAAQ,CAAC,EAAD,CANgB,0CAM3CsC,KAN2C,gBAMpCgE,QANoC,gCAO1BtG,QAAQ,CAACmC,WAAW,CAAC,CAAD,CAAX,CAAeF,KAAhB,CAPkB,2CAO3C8B,IAP2C,gBAOrCwC,OAPqC,gCAQpBvG,QAAQ,CAAC,CACrCwG,UAAU,CAAE,IADyB,CAErCC,WAAW,CAAE,IAFwB,CAGrCC,gBAAgB,CAAE,IAHmB,CAAD,CARY,2CAQ3CnE,OAR2C,gBAQlCoE,UARkC,gBAclD,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,KAAD,CAAQ5E,KAAR,CAAkB,CACzC,GAAM6E,CAAAA,cAAc,kBACfvE,OADe,EAElBiE,UAAU,CAAE,IAFM,CAGlBC,WAAW,CAAE,IAHK,CAIlBC,gBAAgB,CAAE,IAJA,EAApB,CAOA,GAAIzE,KAAK,GAAK,KAAd,CAAqB,CACnB6E,cAAc,CAAC7E,KAAD,CAAd,CAAwB,IAAxB,CACD,CAED0E,UAAU,CAACG,cAAD,CAAV,CACAX,oBAAoB,CAAC,EAAD,CAApB,CACAF,aAAa,CAAChE,KAAD,CAAb,CACD,CAfD,CAiBA,GAAM8E,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACF,KAAD,CAAW,CACnCA,KAAK,CAACG,OAAN,GACAV,QAAQ,CAACO,KAAK,CAACI,MAAN,CAAahF,KAAd,CAAR,CACD,CAHD,CAKA,GAAMiF,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACL,KAAD,CAAW,CAClCA,KAAK,CAACG,OAAN,GACAT,OAAO,CAACM,KAAK,CAACI,MAAN,CAAahF,KAAd,CAAP,CACD,CAHD,CAKA,GAAMkF,CAAAA,wBAAwB,CAAG,QAA3BA,CAAAA,wBAA2B,CAACN,KAAD,CAAW,CAC1CV,oBAAoB,CAACU,KAAK,CAACI,MAAN,CAAaG,OAAb,CACjB/E,SAAS,CAAC8B,GAAV,CAAc,SAAC1B,QAAD,QAAcA,CAAAA,QAAQ,CAAC4E,EAAvB,EAAd,CADiB,CAEjB,EAFgB,CAApB,CAGD,CAJD,CAMA,GAAMC,CAAAA,uBAAuB,CAAG,QAA1BA,CAAAA,uBAA0B,CAACT,KAAD,CAAQU,UAAR,CAAuB,CACrD,GAAI,CAACrB,iBAAiB,CAAClD,QAAlB,CAA2BuE,UAA3B,CAAL,CAA6C,CAC3CpB,oBAAoB,CAAC,SAACqB,YAAD,qCAAsBA,YAAtB,GAAoCD,UAApC,IAAD,CAApB,CACD,CAFD,IAEO,CACLpB,oBAAoB,CAAC,SAACqB,YAAD,QAAkBA,CAAAA,YAAY,CAAChF,MAAb,CAAoB,SAAC6E,EAAD,QAAQA,CAAAA,EAAE,GAAKE,UAAf,EAApB,CAAlB,EAAD,CAApB,CACD,CACF,CAND,CAQA,GAAME,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACZ,KAAD,CAAQa,OAAR,CAAoB,CAC3CtB,OAAO,CAACsB,OAAD,CAAP,CACD,CAFD,CAIA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACd,KAAD,CAAW,CACnCR,QAAQ,CAACQ,KAAK,CAACI,MAAN,CAAahF,KAAd,CAAR,CACD,CAFD,CAIA;AACA,GAAM2F,CAAAA,iBAAiB,CAAGxF,YAAY,CAACC,SAAD,CAAYC,KAAZ,CAAmBC,OAAnB,CAAtC,CACA,GAAMsF,CAAAA,eAAe,CAAG/D,SAAS,CAAC8D,iBAAD,CAAoB7D,IAApB,CAAjC,CACA,GAAM+D,CAAAA,kBAAkB,CAAG1E,eAAe,CAACyE,eAAD,CAAkBxE,IAAlB,CAAwBC,KAAxB,CAA1C,CACA,GAAMyE,CAAAA,oBAAoB,CAAG7B,iBAAiB,CAAC8B,MAAlB,CAA2B,CAAxD,CACA,GAAMC,CAAAA,qBAAqB,CAAG/B,iBAAiB,CAAC8B,MAAlB,CAA2B,CAA3B,EAAgC9B,iBAAiB,CAAC8B,MAAlB,CAA2B3F,SAAS,CAAC2F,MAAnG,CACA,GAAME,CAAAA,oBAAoB,CAAGhC,iBAAiB,CAAC8B,MAAlB,GAA6B3F,SAAS,CAAC2F,MAApE,CAEA,oBACE,oBAAC,IAAD,gBACE,SAAS,CAAE7H,IAAI,CAAC4F,OAAO,CAACvB,IAAT,CAAeqB,SAAf,CADjB,EAEMC,IAFN,eAIE,oBAAC,IAAD,EACE,QAAQ,CAAEc,gBADZ,CAEE,aAAa,CAAC,MAFhB,CAGE,SAAS,CAAC,WAHZ,CAIE,KAAK,CAAEZ,UAJT,CAKE,OAAO,CAAC,YALV,EAOGhE,IAAI,CAACmC,GAAL,CAAS,SAACgE,GAAD,sBACR,oBAAC,GAAD,EACE,GAAG,CAAEA,GAAG,CAAClG,KADX,CAEE,KAAK,CAAEkG,GAAG,CAAClG,KAFb,CAGE,KAAK,CAAEkG,GAAG,CAACjG,KAHb,EADQ,GAAT,CAPH,CAJF,cAmBE,oBAAC,OAAD,MAnBF,cAoBE,oBAAC,GAAD,EACE,CAAC,CAAE,CADL,CAEE,SAAS,CAAE,EAFb,CAGE,OAAO,CAAC,MAHV,CAIE,UAAU,CAAC,QAJb,eAME,oBAAC,SAAD,EACE,SAAS,CAAE6D,OAAO,CAACtB,UADrB,CAEE,UAAU,CAAE,CACV2D,cAAc,cACZ,oBAAC,cAAD,EAAgB,QAAQ,CAAC,OAAzB,eACE,oBAAC,OAAD,EACE,QAAQ,CAAC,OADX,CAEE,KAAK,CAAC,QAFR,eAIE,oBAAC,UAAD,MAJF,CADF,CAFQ,CAFd,CAcE,QAAQ,CAAErB,iBAdZ,CAeE,WAAW,CAAC,kBAfd,CAgBE,KAAK,CAAEzE,KAhBT,CAiBE,OAAO,CAAC,UAjBV,EANF,cAyBE,oBAAC,GAAD,EAAK,QAAQ,CAAE,CAAf,EAzBF,cA0BE,oBAAC,SAAD,EACE,KAAK,CAAC,SADR,CAEE,IAAI,CAAC,MAFP,CAGE,QAAQ,CAAE4E,gBAHZ,CAIE,MAAM,KAJR,CAKE,WAAW,CAAE,CAAEmB,MAAM,CAAE,IAAV,CALf,CAME,KAAK,CAAEtE,IANT,CAOE,OAAO,CAAC,UAPV,EASG5B,WAAW,CAACgC,GAAZ,CAAgB,SAACmE,MAAD,sBACf,8BACE,GAAG,CAAEA,MAAM,CAACrG,KADd,CAEE,KAAK,CAAEqG,MAAM,CAACrG,KAFhB,EAIGqG,MAAM,CAACpG,KAJV,CADe,GAAhB,CATH,CA1BF,CApBF,CAiEG6F,oBAAoB,eACnB,2BAAK,SAAS,CAAEhC,OAAO,CAACpB,cAAxB,eACE,2BAAK,SAAS,CAAEoB,OAAO,CAAClB,WAAxB,eACE,oBAAC,QAAD,EACE,OAAO,CAAEqD,oBADX,CAEE,aAAa,CAAED,qBAFjB,CAGE,QAAQ,CAAEd,wBAHZ,EADF,cAME,oBAAC,MAAD,EACE,OAAO,CAAC,UADV,CAEE,SAAS,CAAEpB,OAAO,CAACT,UAFrB,WANF,cAYE,oBAAC,MAAD,EACE,OAAO,CAAC,UADV,CAEE,SAAS,CAAES,OAAO,CAACT,UAFrB,SAZF,CADF,CAlEJ,cAwFE,oBAAC,gBAAD,mBACE,oBAAC,GAAD,EAAK,QAAQ,CAAE,GAAf,eACE,oBAAC,KAAD,mBACE,oBAAC,SAAD,mBACE,oBAAC,QAAD,mBACE,oBAAC,SAAD,EAAW,OAAO,CAAC,UAAnB,eACE,oBAAC,QAAD,EACE,OAAO,CAAE4C,oBADX,CAEE,aAAa,CAAED,qBAFjB,CAGE,QAAQ,CAAEd,wBAHZ,EADF,CADF,cAQE,oBAAC,SAAD,aARF,cAWE,oBAAC,SAAD,iBAXF,cAcE,oBAAC,SAAD,eAdF,cAiBE,oBAAC,SAAD,cAjBF,cAoBE,oBAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,YApBF,CADF,CADF,cA2BE,oBAAC,SAAD,MACGW,kBAAkB,CAAC3D,GAAnB,CAAuB,SAAC1B,QAAD,CAAc,CACpC,GAAM8F,CAAAA,kBAAkB,CAAGrC,iBAAiB,CAAClD,QAAlB,CAA2BP,QAAQ,CAAC4E,EAApC,CAA3B,CAEA,oBACE,oBAAC,QAAD,EACE,KAAK,KADP,CAEE,GAAG,CAAE5E,QAAQ,CAAC4E,EAFhB,CAGE,QAAQ,CAAEkB,kBAHZ,eAKE,oBAAC,SAAD,EAAW,OAAO,CAAC,UAAnB,eACE,oBAAC,QAAD,EACE,OAAO,CAAEA,kBADX,CAEE,QAAQ,CAAE,kBAAC1B,KAAD,QAAWS,CAAAA,uBAAuB,CAACT,KAAD,CAAQpE,QAAQ,CAAC4E,EAAjB,CAAlC,EAFZ,CAGE,KAAK,CAAEkB,kBAHT,EADF,CALF,cAYE,oBAAC,SAAD,mBACE,oBAAC,GAAD,EACE,OAAO,CAAC,MADV,CAEE,UAAU,CAAC,QAFb,eAIE,oBAAC,MAAD,EACE,SAAS,CAAExC,OAAO,CAACN,MADrB,CAEE,GAAG,CAAEhD,QAAQ,CAACgD,MAFhB,EAIG1D,WAAW,CAACU,QAAQ,CAAC+F,IAAV,CAJd,CAJF,cAUE,4CACE,oBAAC,IAAD,EACE,KAAK,CAAC,SADR,CAEE,SAAS,CAAEtI,UAFb,CAGE,EAAE,CAAC,6BAHL,CAIE,OAAO,CAAC,IAJV,EAMGuC,QAAQ,CAAC+F,IANZ,CADF,cASE,oBAAC,UAAD,EACE,OAAO,CAAC,OADV,CAEE,KAAK,CAAC,eAFR,EAIG/F,QAAQ,CAACgG,KAJZ,CATF,CAVF,CADF,CAZF,cAyCE,oBAAC,SAAD,MACGhG,QAAQ,CAACiG,QADZ,CAzCF,cA4CE,oBAAC,SAAD,MACGjG,QAAQ,CAACkG,MADZ,CA5CF,cA+CE,oBAAC,SAAD,MACGlG,QAAQ,CAACmG,QADZ,CAEGnG,QAAQ,CAACoG,KAFZ,CA/CF,cAmDE,oBAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,eACE,oBAAC,UAAD,EACE,SAAS,CAAE3I,UADb,CAEE,EAAE,CAAC,kCAFL,eAIE,oBAAC,OAAD,EAAS,QAAQ,CAAC,OAAlB,eACE,oBAAC,QAAD,MADF,CAJF,CADF,cASE,oBAAC,UAAD,EACE,SAAS,CAAEA,UADb,CAEE,EAAE,CAAC,6BAFL,eAIE,oBAAC,OAAD,EAAS,QAAQ,CAAC,OAAlB,eACE,oBAAC,cAAD,MADF,CAJF,CATF,CAnDF,CADF,EAwED,CA3EA,CADH,CA3BF,CADF,CADF,CAxFF,cAsME,oBAAC,eAAD,EACE,SAAS,CAAC,KADZ,CAEE,KAAK,CAAE0H,iBAAiB,CAACI,MAF3B,CAGE,YAAY,CAAEP,gBAHhB,CAIE,mBAAmB,CAAEE,iBAJvB,CAKE,IAAI,CAAEtE,IALR,CAME,WAAW,CAAEC,KANf,CAOE,kBAAkB,CAAE,CAAC,CAAD,CAAI,EAAJ,CAAQ,EAAR,CAPtB,EAtMF,CADF,EAkND,CAODsC,OAAO,CAACkD,YAAR,CAAuB,CACrBzG,SAAS,CAAE,EADU,CAAvB,CAIA,cAAeuD,CAAAA,OAAf","sourcesContent":["/* eslint-disable max-len */\nimport React, { useState } from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport PerfectScrollbar from 'react-perfect-scrollbar';\nimport {\n  Avatar,\n  Box,\n  Button,\n  Card,\n  Checkbox,\n  Divider,\n  IconButton,\n  InputAdornment,\n  Link,\n  SvgIcon,\n  Tab,\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TablePagination,\n  TableRow,\n  Tabs,\n  TextField,\n  Typography,\n  makeStyles\n} from '@material-ui/core';\nimport {\n  Edit as EditIcon,\n  ArrowRight as ArrowRightIcon,\n  Search as SearchIcon\n} from 'react-feather';\nimport getInitials from 'src/utils/getInitials';\n\nconst tabs = [\n  {\n    value: 'all',\n    label: 'All'\n  },\n  {\n    value: 'acceptsMarketing',\n    label: 'Accepts Marketing'\n  },\n  {\n    value: 'isProspect',\n    label: 'Prospect'\n  },\n  {\n    value: 'isReturning',\n    label: 'Returning'\n  }\n];\n\nconst sortOptions = [\n  {\n    value: 'updatedAt|desc',\n    label: 'Last update (newest first)'\n  },\n  {\n    value: 'updatedAt|asc',\n    label: 'Last update (oldest first)'\n  },\n  {\n    value: 'orders|desc',\n    label: 'Total orders (high to low)'\n  },\n  {\n    value: 'orders|asc',\n    label: 'Total orders (low to high)'\n  }\n];\n\nfunction applyFilters(customers, query, filters) {\n  return customers.filter((customer) => {\n    let matches = true;\n\n    if (query) {\n      const properties = ['email', 'name'];\n      let containsQuery = false;\n\n      properties.forEach((property) => {\n        if (customer[property].toLowerCase().includes(query.toLowerCase())) {\n          containsQuery = true;\n        }\n      });\n\n      if (!containsQuery) {\n        matches = false;\n      }\n    }\n\n    Object.keys(filters).forEach((key) => {\n      const value = filters[key];\n\n      if (value && customer[key] !== value) {\n        matches = false;\n      }\n    });\n\n    return matches;\n  });\n}\n\nfunction applyPagination(customers, page, limit) {\n  return customers.slice(page * limit, page * limit + limit);\n}\n\nfunction descendingComparator(a, b, orderBy) {\n  if (b[orderBy] < a[orderBy]) {\n    return -1;\n  }\n\n  if (b[orderBy] > a[orderBy]) {\n    return 1;\n  }\n\n  return 0;\n}\n\nfunction getComparator(order, orderBy) {\n  return order === 'desc'\n    ? (a, b) => descendingComparator(a, b, orderBy)\n    : (a, b) => -descendingComparator(a, b, orderBy);\n}\n\nfunction applySort(customers, sort) {\n  const [orderBy, order] = sort.split('|');\n  const comparator = getComparator(order, orderBy);\n  const stabilizedThis = customers.map((el, index) => [el, index]);\n\n  stabilizedThis.sort((a, b) => {\n    // eslint-disable-next-line no-shadow\n    const order = comparator(a[0], b[0]);\n\n    if (order !== 0) return order;\n\n    return a[1] - b[1];\n  });\n\n  return stabilizedThis.map((el) => el[0]);\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  queryField: {\n    width: 500\n  },\n  bulkOperations: {\n    position: 'relative'\n  },\n  bulkActions: {\n    paddingLeft: 4,\n    paddingRight: 4,\n    marginTop: 6,\n    position: 'absolute',\n    width: '100%',\n    zIndex: 2,\n    backgroundColor: theme.palette.background.default\n  },\n  bulkAction: {\n    marginLeft: theme.spacing(2)\n  },\n  avatar: {\n    height: 42,\n    width: 42,\n    marginRight: theme.spacing(1)\n  }\n}));\n\nfunction Results({ className, customers, ...rest }) {\n  const classes = useStyles();\n  const [currentTab, setCurrentTab] = useState('all');\n  const [selectedCustomers, setSelectedCustomers] = useState([]);\n  const [page, setPage] = useState(0);\n  const [limit, setLimit] = useState(10);\n  const [query, setQuery] = useState('');\n  const [sort, setSort] = useState(sortOptions[0].value);\n  const [filters, setFilters] = useState({\n    isProspect: null,\n    isReturning: null,\n    acceptsMarketing: null\n  });\n\n  const handleTabsChange = (event, value) => {\n    const updatedFilters = {\n      ...filters,\n      isProspect: null,\n      isReturning: null,\n      acceptsMarketing: null\n    };\n\n    if (value !== 'all') {\n      updatedFilters[value] = true;\n    }\n\n    setFilters(updatedFilters);\n    setSelectedCustomers([]);\n    setCurrentTab(value);\n  };\n\n  const handleQueryChange = (event) => {\n    event.persist();\n    setQuery(event.target.value);\n  };\n\n  const handleSortChange = (event) => {\n    event.persist();\n    setSort(event.target.value);\n  };\n\n  const handleSelectAllCustomers = (event) => {\n    setSelectedCustomers(event.target.checked\n      ? customers.map((customer) => customer.id)\n      : []);\n  };\n\n  const handleSelectOneCustomer = (event, customerId) => {\n    if (!selectedCustomers.includes(customerId)) {\n      setSelectedCustomers((prevSelected) => [...prevSelected, customerId]);\n    } else {\n      setSelectedCustomers((prevSelected) => prevSelected.filter((id) => id !== customerId));\n    }\n  };\n\n  const handlePageChange = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleLimitChange = (event) => {\n    setLimit(event.target.value);\n  };\n\n  // Usually query is done on backend with indexing solutions\n  const filteredCustomers = applyFilters(customers, query, filters);\n  const sortedCustomers = applySort(filteredCustomers, sort);\n  const paginatedCustomers = applyPagination(sortedCustomers, page, limit);\n  const enableBulkOperations = selectedCustomers.length > 0;\n  const selectedSomeCustomers = selectedCustomers.length > 0 && selectedCustomers.length < customers.length;\n  const selectedAllCustomers = selectedCustomers.length === customers.length;\n\n  return (\n    <Card\n      className={clsx(classes.root, className)}\n      {...rest}\n    >\n      <Tabs\n        onChange={handleTabsChange}\n        scrollButtons=\"auto\"\n        textColor=\"secondary\"\n        value={currentTab}\n        variant=\"scrollable\"\n      >\n        {tabs.map((tab) => (\n          <Tab\n            key={tab.value}\n            value={tab.value}\n            label={tab.label}\n          />\n        ))}\n      </Tabs>\n      <Divider />\n      <Box\n        p={2}\n        minHeight={56}\n        display=\"flex\"\n        alignItems=\"center\"\n      >\n        <TextField\n          className={classes.queryField}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <SvgIcon\n                  fontSize=\"small\"\n                  color=\"action\"\n                >\n                  <SearchIcon />\n                </SvgIcon>\n              </InputAdornment>\n            )\n          }}\n          onChange={handleQueryChange}\n          placeholder=\"Search customers\"\n          value={query}\n          variant=\"outlined\"\n        />\n        <Box flexGrow={1} />\n        <TextField\n          label=\"Sort By\"\n          name=\"sort\"\n          onChange={handleSortChange}\n          select\n          SelectProps={{ native: true }}\n          value={sort}\n          variant=\"outlined\"\n        >\n          {sortOptions.map((option) => (\n            <option\n              key={option.value}\n              value={option.value}\n            >\n              {option.label}\n            </option>\n          ))}\n        </TextField>\n      </Box>\n      {enableBulkOperations && (\n        <div className={classes.bulkOperations}>\n          <div className={classes.bulkActions}>\n            <Checkbox\n              checked={selectedAllCustomers}\n              indeterminate={selectedSomeCustomers}\n              onChange={handleSelectAllCustomers}\n            />\n            <Button\n              variant=\"outlined\"\n              className={classes.bulkAction}\n            >\n              Delete\n            </Button>\n            <Button\n              variant=\"outlined\"\n              className={classes.bulkAction}\n            >\n              Edit\n            </Button>\n          </div>\n        </div>\n      )}\n      <PerfectScrollbar>\n        <Box minWidth={700}>\n          <Table>\n            <TableHead>\n              <TableRow>\n                <TableCell padding=\"checkbox\">\n                  <Checkbox\n                    checked={selectedAllCustomers}\n                    indeterminate={selectedSomeCustomers}\n                    onChange={handleSelectAllCustomers}\n                  />\n                </TableCell>\n                <TableCell>\n                  Name\n                </TableCell>\n                <TableCell>\n                  Location\n                </TableCell>\n                <TableCell>\n                  Orders\n                </TableCell>\n                <TableCell>\n                  Spent\n                </TableCell>\n                <TableCell align=\"right\">\n                  Actions\n                </TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {paginatedCustomers.map((customer) => {\n                const isCustomerSelected = selectedCustomers.includes(customer.id);\n\n                return (\n                  <TableRow\n                    hover\n                    key={customer.id}\n                    selected={isCustomerSelected}\n                  >\n                    <TableCell padding=\"checkbox\">\n                      <Checkbox\n                        checked={isCustomerSelected}\n                        onChange={(event) => handleSelectOneCustomer(event, customer.id)}\n                        value={isCustomerSelected}\n                      />\n                    </TableCell>\n                    <TableCell>\n                      <Box\n                        display=\"flex\"\n                        alignItems=\"center\"\n                      >\n                        <Avatar\n                          className={classes.avatar}\n                          src={customer.avatar}\n                        >\n                          {getInitials(customer.name)}\n                        </Avatar>\n                        <div>\n                          <Link\n                            color=\"inherit\"\n                            component={RouterLink}\n                            to=\"/app/management/customers/1\"\n                            variant=\"h6\"\n                          >\n                            {customer.name}\n                          </Link>\n                          <Typography\n                            variant=\"body2\"\n                            color=\"textSecondary\"\n                          >\n                            {customer.email}\n                          </Typography>\n                        </div>\n                      </Box>\n                    </TableCell>\n                    <TableCell>\n                      {customer.location}\n                    </TableCell>\n                    <TableCell>\n                      {customer.orders}\n                    </TableCell>\n                    <TableCell>\n                      {customer.currency}\n                      {customer.spent}\n                    </TableCell>\n                    <TableCell align=\"right\">\n                      <IconButton\n                        component={RouterLink}\n                        to=\"/app/management/customers/1/edit\"\n                      >\n                        <SvgIcon fontSize=\"small\">\n                          <EditIcon />\n                        </SvgIcon>\n                      </IconButton>\n                      <IconButton\n                        component={RouterLink}\n                        to=\"/app/management/customers/1\"\n                      >\n                        <SvgIcon fontSize=\"small\">\n                          <ArrowRightIcon />\n                        </SvgIcon>\n                      </IconButton>\n                    </TableCell>\n                  </TableRow>\n                );\n              })}\n            </TableBody>\n          </Table>\n        </Box>\n      </PerfectScrollbar>\n      <TablePagination\n        component=\"div\"\n        count={filteredCustomers.length}\n        onChangePage={handlePageChange}\n        onChangeRowsPerPage={handleLimitChange}\n        page={page}\n        rowsPerPage={limit}\n        rowsPerPageOptions={[5, 10, 25]}\n      />\n    </Card>\n  );\n}\n\nResults.propTypes = {\n  className: PropTypes.string,\n  customers: PropTypes.array\n};\n\nResults.defaultProps = {\n  customers: []\n};\n\nexport default Results;\n"]},"metadata":{},"sourceType":"module"}