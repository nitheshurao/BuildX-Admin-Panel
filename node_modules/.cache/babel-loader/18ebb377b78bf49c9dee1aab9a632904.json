{"ast":null,"code":"import _regeneratorRuntime from\"/Users/redhan/Desktop/work/Ecom-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/redhan/Desktop/work/Ecom-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{DragDropContext}from'react-beautiful-dnd';import{useSnackbar}from'notistack';import{Box,makeStyles}from'@material-ui/core';import Page from'src/components/Page';import{getBoard,moveCard}from'src/actions/kanbanActions';import Header from'./Header';import List from'./List';import ListAdd from'./ListAdd';var useStyles=makeStyles(function(theme){return{root:{backgroundColor:theme.palette.background.dark,height:'100%',display:'flex',overflow:'hidden',flexDirection:'column'},content:{flexGrow:1,flexShrink:1,display:'flex',overflowY:'hidden',overflowX:'auto'},inner:{display:'flex',paddingBottom:theme.spacing(3),paddingTop:theme.spacing(3),paddingLeft:theme.spacing(1),paddingRight:theme.spacing(1)}};});function KanbanView(){var classes=useStyles();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.kanban;}),lists=_useSelector.lists,isLoaded=_useSelector.isLoaded;var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var handleDragEnd=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var source,destination,draggableId;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:source=_ref.source,destination=_ref.destination,draggableId=_ref.draggableId;_context.prev=1;if(destination){_context.next=4;break;}return _context.abrupt(\"return\");case 4:if(!(source.droppableId===destination.droppableId&&source.index===destination.index)){_context.next=6;break;}return _context.abrupt(\"return\");case 6:if(!(source.droppableId===destination.droppableId)){_context.next=11;break;}_context.next=9;return dispatch(moveCard(draggableId,destination.index));case 9:_context.next=13;break;case 11:_context.next=13;return dispatch(moveCard(draggableId,destination.index,destination.droppableId));case 13:enqueueSnackbar('Card moved',{variant:'success'});_context.next=18;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](1);case 18:case\"end\":return _context.stop();}}},_callee,null,[[1,16]]);}));return function handleDragEnd(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){dispatch(getBoard());},[dispatch]);if(!isLoaded){return null;}return(/*#__PURE__*/React.createElement(Page,{className:classes.root,title:\"Kanban Board\"},/*#__PURE__*/React.createElement(Box,{p:3},/*#__PURE__*/React.createElement(Header,null)),/*#__PURE__*/React.createElement(DragDropContext,{onDragEnd:handleDragEnd},/*#__PURE__*/React.createElement(\"div\",{className:classes.content},/*#__PURE__*/React.createElement(\"div\",{className:classes.inner},lists.allIds.map(function(listId){return(/*#__PURE__*/React.createElement(List,{className:classes.list,key:listId,listId:listId}));}),/*#__PURE__*/React.createElement(ListAdd,null))))));}export default KanbanView;","map":{"version":3,"sources":["/Users/redhan/Desktop/work/Ecom-Admin/src/views/kanban/KanbanView/index.js"],"names":["React","useEffect","useDispatch","useSelector","DragDropContext","useSnackbar","Box","makeStyles","Page","getBoard","moveCard","Header","List","ListAdd","useStyles","theme","root","backgroundColor","palette","background","dark","height","display","overflow","flexDirection","content","flexGrow","flexShrink","overflowY","overflowX","inner","paddingBottom","spacing","paddingTop","paddingLeft","paddingRight","KanbanView","classes","dispatch","state","kanban","lists","isLoaded","enqueueSnackbar","handleDragEnd","source","destination","draggableId","droppableId","index","variant","allIds","map","listId","list"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { DragDropContext } from 'react-beautiful-dnd';\nimport { useSnackbar } from 'notistack';\nimport { Box, makeStyles } from '@material-ui/core';\nimport Page from 'src/components/Page';\nimport { getBoard, moveCard } from 'src/actions/kanbanActions';\nimport Header from './Header';\nimport List from './List';\nimport ListAdd from './ListAdd';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: theme.palette.background.dark,\n    height: '100%',\n    display: 'flex',\n    overflow: 'hidden',\n    flexDirection: 'column'\n  },\n  content: {\n    flexGrow: 1,\n    flexShrink: 1,\n    display: 'flex',\n    overflowY: 'hidden',\n    overflowX: 'auto'\n  },\n  inner: {\n    display: 'flex',\n    paddingBottom: theme.spacing(3),\n    paddingTop: theme.spacing(3),\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1)\n  }\n}));\n\nfunction KanbanView() {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const { lists, isLoaded } = useSelector((state) => state.kanban);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const handleDragEnd = async ({ source, destination, draggableId }) => {\n    try {\n    // Dropped outside the list\n      if (!destination) {\n        return;\n      }\n\n      // Card has not been moved\n      if (source.droppableId === destination.droppableId\n        && source.index === destination.index\n      ) {\n        return;\n      }\n\n      if (source.droppableId === destination.droppableId) {\n      // Moved to the same list on diferent position\n        await dispatch(moveCard(draggableId, destination.index));\n      } else {\n      // Moved to another list\n        await dispatch(moveCard(draggableId, destination.index, destination.droppableId));\n      }\n\n      enqueueSnackbar('Card moved', {\n        variant: 'success'\n      });\n    } catch (error) {\n      //\n    }\n  };\n\n  useEffect(() => {\n    dispatch(getBoard());\n  }, [dispatch]);\n\n  if (!isLoaded) {\n    return null;\n  }\n\n  return (\n    <Page\n      className={classes.root}\n      title=\"Kanban Board\"\n    >\n      <Box p={3}>\n        <Header />\n      </Box>\n      <DragDropContext onDragEnd={handleDragEnd}>\n        <div className={classes.content}>\n          <div className={classes.inner}>\n            {lists.allIds.map((listId) => (\n              <List\n                className={classes.list}\n                key={listId}\n                listId={listId}\n              />\n            ))}\n            <ListAdd />\n          </div>\n        </div>\n      </DragDropContext>\n    </Page>\n  );\n}\n\nexport default KanbanView;\n"]},"metadata":{},"sourceType":"module"}