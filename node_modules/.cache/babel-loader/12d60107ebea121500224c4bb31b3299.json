{"ast":null,"code":"import _toConsumableArray from\"/Users/redhan/Desktop/work/Ecom-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";/* eslint-disable no-param-reassign */import produce from'immer';import _ from'lodash';import{GET_BOARD,CREATE_LIST,UPDATE_LIST,CLEAR_LIST,DELETE_LIST,CREATE_CARD,UPDATE_CARD,MOVE_CARD,DELETE_CARD,ADD_COMMENT,ADD_CHECKLIST,UPDATE_CHECKLIST,DELETE_CHECKLIST,ADD_CHECK_ITEM,UPDATE_CHECK_ITEM,DELETE_CHECK_ITEM}from'src/actions/kanbanActions';import objFromArray from'src/utils/objFromArray';var initialState={isLoaded:false,lists:{byId:{},allIds:[]},cards:{byId:{},allIds:[]},members:{byId:{},allIds:[]}};var kanbanReducer=function kanbanReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case GET_BOARD:{var board=action.payload.board;return produce(state,function(draft){draft.lists.byId=objFromArray(board.lists);draft.lists.allIds=Object.keys(draft.lists.byId);draft.cards.byId=objFromArray(board.cards);draft.cards.allIds=Object.keys(draft.cards.byId);draft.members.byId=objFromArray(board.members);draft.members.allIds=Object.keys(draft.members.byId);draft.isLoaded=true;});}case CREATE_LIST:{var list=action.payload.list;return produce(state,function(draft){draft.lists.byId[list.id]=list;draft.lists.allIds.push(list.id);});}case UPDATE_LIST:{var _list=action.payload.list;return produce(state,function(draft){_.merge(draft.lists.byId[_list.id],_list);});}case CLEAR_LIST:{var listId=action.payload.listId;return produce(state,function(draft){var cardIds=draft.lists.byId[listId].cardIds;draft.lists.byId[listId].cardIds=[];draft.cards.byId=_.omit(draft.cards.byId,cardIds);_.pull.apply(_,[draft.cards.allIds].concat(_toConsumableArray(cardIds)));});}case DELETE_LIST:{var _listId=action.payload.listId;return produce(state,function(draft){draft.lists.byId=_.omit(draft.lists.byId,_listId);_.pull(draft.lists.allIds,_listId);});}case CREATE_CARD:{var card=action.payload.card;return produce(state,function(draft){draft.cards.byId[card.id]=card;draft.cards.allIds.push(card.id);draft.lists.byId[card.listId].cardIds.push(card.id);});}case UPDATE_CARD:{var _card=action.payload.card;return produce(state,function(draft){_.merge(draft.cards.byId[_card.id],_card);});}case MOVE_CARD:{var _action$payload=action.payload,cardId=_action$payload.cardId,position=_action$payload.position,_listId2=_action$payload.listId;return produce(state,function(draft){var sourceListId=draft.cards.byId[cardId].listId;// Remove card from source list\n_.pull(draft.lists.byId[sourceListId].cardIds,cardId);// If listId arg exists, it means that\n// we have to add the card to the new list\nif(_listId2){draft.cards.byId[cardId].listId=_listId2;draft.lists.byId[_listId2].cardIds.splice(position,0,cardId);}else{draft.lists.byId[sourceListId].cardIds.splice(position,0,cardId);}});}case DELETE_CARD:{var _cardId=action.payload.cardId;return produce(state,function(draft){var listId=draft.cards.byId[_cardId].listId;draft.cards.byId=_.omit(draft.cards.byId,_cardId);_.pull(draft.cards.allIds,_cardId);_.pull(draft.lists.byId[listId].cardIds,_cardId);});}case ADD_COMMENT:{var comment=action.payload.comment;return produce(state,function(draft){draft.cards.byId[comment.cardId].comments.push(comment);});}case ADD_CHECKLIST:{var _action$payload2=action.payload,_cardId2=_action$payload2.cardId,checklist=_action$payload2.checklist;return produce(state,function(draft){draft.cards.byId[_cardId2].checklists.push(checklist);});}case UPDATE_CHECKLIST:{var _action$payload3=action.payload,_cardId3=_action$payload3.cardId,_checklist=_action$payload3.checklist;return produce(state,function(draft){var card=draft.cards.byId[_cardId3];card.checklists=_.map(card.checklists,function(_checklist){if(_checklist.id===_checklist.id){return _checklist;}return _checklist;});});}case DELETE_CHECKLIST:{var _action$payload4=action.payload,_cardId4=_action$payload4.cardId,checklistId=_action$payload4.checklistId;return produce(state,function(draft){var card=draft.cards.byId[_cardId4];card.checklists=_.reject(card.checklists,{id:checklistId});});}case ADD_CHECK_ITEM:{var _action$payload5=action.payload,_cardId5=_action$payload5.cardId,_checklistId=_action$payload5.checklistId,checkItem=_action$payload5.checkItem;return produce(state,function(draft){var card=draft.cards.byId[_cardId5];_.assign(card,{checklists:_.map(card.checklists,function(checklist){if(checklist.id===_checklistId){_.assign(checklist,{checkItems:[].concat(_toConsumableArray(checklist.checkItems),[checkItem])});}return checklist;})});});}case UPDATE_CHECK_ITEM:{var _action$payload6=action.payload,_cardId6=_action$payload6.cardId,_checklistId2=_action$payload6.checklistId,checkItemId=_action$payload6.checkItemId,_checkItem=_action$payload6.checkItem;return produce(state,function(draft){var card=draft.cards.byId[_cardId6];card.checklists=_.map(card.checklists,function(checklist){if(checklist.id===_checklistId2){_.assign(checklist,{checkItems:_.map(checklist.checkItems,function(_checkItem){if(_checkItem.id===checkItemId){return _checkItem;}return _checkItem;})});}return checklist;});});}case DELETE_CHECK_ITEM:{var _action$payload7=action.payload,_cardId7=_action$payload7.cardId,_checklistId3=_action$payload7.checklistId,_checkItemId=_action$payload7.checkItemId;return produce(state,function(draft){var card=draft.cards.byId[_cardId7];card.checklists=_.map(card.checklists,function(checklist){if(checklist.id===_checklistId3){_.assign(checklist,{checkItems:_.reject(checklist.checkItems,{id:_checkItemId})});}return checklist;});});}default:{return state;}}};export default kanbanReducer;","map":{"version":3,"sources":["/Users/redhan/Desktop/work/Ecom-Admin/src/reducers/kanbanReducer.js"],"names":["produce","_","GET_BOARD","CREATE_LIST","UPDATE_LIST","CLEAR_LIST","DELETE_LIST","CREATE_CARD","UPDATE_CARD","MOVE_CARD","DELETE_CARD","ADD_COMMENT","ADD_CHECKLIST","UPDATE_CHECKLIST","DELETE_CHECKLIST","ADD_CHECK_ITEM","UPDATE_CHECK_ITEM","DELETE_CHECK_ITEM","objFromArray","initialState","isLoaded","lists","byId","allIds","cards","members","kanbanReducer","state","action","type","board","payload","draft","Object","keys","list","id","push","merge","listId","cardIds","omit","pull","card","cardId","position","sourceListId","splice","comment","comments","checklist","checklists","map","_checklist","checklistId","reject","checkItem","assign","checkItems","checkItemId","_checkItem"],"mappings":"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","sourcesContent":["/* eslint-disable no-param-reassign */\nimport produce from 'immer';\nimport _ from 'lodash';\nimport {\n  GET_BOARD,\n  CREATE_LIST,\n  UPDATE_LIST,\n  CLEAR_LIST,\n  DELETE_LIST,\n  CREATE_CARD,\n  UPDATE_CARD,\n  MOVE_CARD,\n  DELETE_CARD,\n  ADD_COMMENT,\n  ADD_CHECKLIST,\n  UPDATE_CHECKLIST,\n  DELETE_CHECKLIST,\n  ADD_CHECK_ITEM,\n  UPDATE_CHECK_ITEM,\n  DELETE_CHECK_ITEM\n} from 'src/actions/kanbanActions';\nimport objFromArray from 'src/utils/objFromArray';\n\nconst initialState = {\n  isLoaded: false,\n  lists: {\n    byId: {},\n    allIds: []\n  },\n  cards: {\n    byId: {},\n    allIds: []\n  },\n  members: {\n    byId: {},\n    allIds: []\n  }\n};\n\nconst kanbanReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case GET_BOARD: {\n      const { board } = action.payload;\n\n      return produce(state, (draft) => {\n        draft.lists.byId = objFromArray(board.lists);\n        draft.lists.allIds = Object.keys(draft.lists.byId);\n        draft.cards.byId = objFromArray(board.cards);\n        draft.cards.allIds = Object.keys(draft.cards.byId);\n        draft.members.byId = objFromArray(board.members);\n        draft.members.allIds = Object.keys(draft.members.byId);\n        draft.isLoaded = true;\n      });\n    }\n\n    case CREATE_LIST: {\n      const { list } = action.payload;\n\n      return produce(state, (draft) => {\n        draft.lists.byId[list.id] = list;\n        draft.lists.allIds.push(list.id);\n      });\n    }\n\n    case UPDATE_LIST: {\n      const { list } = action.payload;\n\n      return produce(state, (draft) => {\n        _.merge(draft.lists.byId[list.id], list);\n      });\n    }\n\n    case CLEAR_LIST: {\n      const { listId } = action.payload;\n\n      return produce(state, (draft) => {\n        const { cardIds } = draft.lists.byId[listId];\n\n        draft.lists.byId[listId].cardIds = [];\n        draft.cards.byId = _.omit(draft.cards.byId, cardIds);\n        _.pull(draft.cards.allIds, ...cardIds);\n      });\n    }\n\n    case DELETE_LIST: {\n      const { listId } = action.payload;\n\n      return produce(state, (draft) => {\n        draft.lists.byId = _.omit(draft.lists.byId, listId);\n        _.pull(draft.lists.allIds, listId);\n      });\n    }\n\n    case CREATE_CARD: {\n      const { card } = action.payload;\n\n      return produce(state, (draft) => {\n        draft.cards.byId[card.id] = card;\n        draft.cards.allIds.push(card.id);\n        draft.lists.byId[card.listId].cardIds.push(card.id);\n      });\n    }\n\n    case UPDATE_CARD: {\n      const { card } = action.payload;\n\n      return produce(state, (draft) => {\n        _.merge(draft.cards.byId[card.id], card);\n      });\n    }\n\n    case MOVE_CARD: {\n      const { cardId, position, listId } = action.payload;\n\n      return produce(state, (draft) => {\n        const { listId: sourceListId } = draft.cards.byId[cardId];\n\n        // Remove card from source list\n        _.pull(draft.lists.byId[sourceListId].cardIds, cardId);\n\n        // If listId arg exists, it means that\n        // we have to add the card to the new list\n        if (listId) {\n          draft.cards.byId[cardId].listId = listId;\n          draft.lists.byId[listId].cardIds.splice(position, 0, cardId);\n        } else {\n          draft.lists.byId[sourceListId].cardIds.splice(position, 0, cardId);\n        }\n      });\n    }\n\n    case DELETE_CARD: {\n      const { cardId } = action.payload;\n\n      return produce(state, (draft) => {\n        const { listId } = draft.cards.byId[cardId];\n\n        draft.cards.byId = _.omit(draft.cards.byId, cardId);\n        _.pull(draft.cards.allIds, cardId);\n        _.pull(draft.lists.byId[listId].cardIds, cardId);\n      });\n    }\n\n    case ADD_COMMENT: {\n      const { comment } = action.payload;\n\n      return produce(state, (draft) => {\n        draft.cards.byId[comment.cardId].comments.push(comment);\n      });\n    }\n\n    case ADD_CHECKLIST: {\n      const { cardId, checklist } = action.payload;\n\n      return produce(state, (draft) => {\n        draft.cards.byId[cardId].checklists.push(checklist);\n      });\n    }\n\n    case UPDATE_CHECKLIST: {\n      const { cardId, checklist } = action.payload;\n\n      return produce(state, (draft) => {\n        const card = draft.cards.byId[cardId];\n\n        card.checklists = _.map(card.checklists, (_checklist) => {\n          if (_checklist.id === checklist.id) {\n            return checklist;\n          }\n\n          return _checklist;\n        });\n      });\n    }\n\n    case DELETE_CHECKLIST: {\n      const { cardId, checklistId } = action.payload;\n\n      return produce(state, (draft) => {\n        const card = draft.cards.byId[cardId];\n\n        card.checklists = _.reject(card.checklists, { id: checklistId });\n      });\n    }\n\n    case ADD_CHECK_ITEM: {\n      const { cardId, checklistId, checkItem } = action.payload;\n\n      return produce(state, (draft) => {\n        const card = draft.cards.byId[cardId];\n\n        _.assign(card, {\n          checklists: _.map(card.checklists, (checklist) => {\n            if (checklist.id === checklistId) {\n              _.assign(checklist, {\n                checkItems: [...checklist.checkItems, checkItem]\n              });\n            }\n\n            return checklist;\n          })\n        });\n      });\n    }\n\n    case UPDATE_CHECK_ITEM: {\n      const {\n        cardId,\n        checklistId,\n        checkItemId,\n        checkItem\n      } = action.payload;\n\n      return produce(state, (draft) => {\n        const card = draft.cards.byId[cardId];\n\n        card.checklists = _.map(card.checklists, (checklist) => {\n          if (checklist.id === checklistId) {\n            _.assign(checklist, {\n              checkItems: _.map(checklist.checkItems, (_checkItem) => {\n                if (_checkItem.id === checkItemId) {\n                  return checkItem;\n                }\n\n                return _checkItem;\n              })\n            });\n          }\n\n          return checklist;\n        });\n      });\n    }\n\n    case DELETE_CHECK_ITEM: {\n      const { cardId, checklistId, checkItemId } = action.payload;\n\n      return produce(state, (draft) => {\n        const card = draft.cards.byId[cardId];\n\n        card.checklists = _.map(card.checklists, (checklist) => {\n          if (checklist.id === checklistId) {\n            _.assign(checklist, {\n              checkItems: _.reject(checklist.checkItems, { id: checkItemId })\n            });\n          }\n\n          return checklist;\n        });\n      });\n    }\n\n    default: {\n      return state;\n    }\n  }\n};\n\nexport default kanbanReducer;\n"]},"metadata":{},"sourceType":"module"}